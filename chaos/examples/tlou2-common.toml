#---------------------------------------------------------------------------------------------------
# Twitch Controls Chaos (TCC)
# Configuration file to support a TCC game.
#
# The syntax for this file is documented in chaosConfigFiles.md
#
# This is a shared template that defines features that are common to all variants of the game. It
# is not meant to be loaded directly.
#
# Note that if you edit this file while the chaos engine is running, you must reload the game
# so the chaos engine can re-read the updated file.
#---------------------------------------------------------------------------------------------------
# config_file_ver: Version string for the TCC game configuration format.
config_file_ver = "1.0"

# chaos_toml: Role of this file in the include chain.
chaos_toml = "template"

# Modifier defaults
[mod_defaults]
# Number of modifiers simultaneously in effect
active_modifiers = 3
# Lifetime (exclusive of pauses) of an individual modifier, in seconds.
time_per_modifier = 180.0

# General settings for the controller
[controller]
# Default time, in seconds, to hold down a button when issuing a command in a sequence.
button_press_time = 0.0625

# Default time, in seconds, to wait after releasing a button before going on to the next command
# in the sequence.
button_release_time = 0.0625

# Time (in seconds) since last received touchpad axis event before the touchpad will be reset
# to inactive. (The default here is 10 ticks assuming 250MHz polling.)
touchpad_inactive_delay = 0.04

# The touchpad can be used to generate axis events based either on the distance travelled from the
# first touch point or the change in the touchpad axis values over time. Set touchpad_velocity to
# true if you want the second method.
touchpad_velocity = false

# Scaling factor to apply to the reslt of the velocity/distance calculation.
# For touchpad_velocity = true, try [ 0.12, 0.12 ] for the x/y scales
touchpad_scale_x = 1.1
touchpad_scale_y = 1.1

# Offset to apply to non-zero axis values.
touchpad_skew = 30

#--------------------------------------------------------------------------------------------------
# Command Map
[[command]]
name = "interact"
binding = "TRIANGLE"

[[command]]
name = "crouch/prone"
binding = "CIRCLE"

# Alias for backing out of a menu
[[command]]
name = "deselect"
binding = "CIRCLE"

[[command]]
name = "jump"
binding = "X"

[[command]]
name = "scope" # while aiming
binding = "X"

# Alias for selecting a menu option
[[command]]
name = "select"
binding = "X"

[[command]]
name = "melee"
binding = "SQUARE"

[[command]]
name = "shoulder swap" # While aiming
binding = "SQUARE"

[[command]]
name = "dodge/sprint"
binding = "L1"

[[command]]
name = "aiming"
binding = "L2"

[[command]]
name = "swap/listen"
binding = "R1"

[[command]]
name = "reload/toss"
binding = "R2"

[[command]]
name = "shoot"
binding = "R2"

[[command]]
name = "look"
binding = "L3"

[[command]]
name = "hold breath" # While aiming
binding = "L3"

[[command]]
name = "flashlight"
binding = "R3"

[[command]]
name = "backpack"
binding = "TOUCHPAD"

[[command]]
name = "horizontal movement"
binding = "LX"

[[command]]
name = "vertical movement"
binding = "LY"

[[command]]
name = "horizontal camera"
binding = "RX"

[[command]]
name = "vertical camera"
binding = "RY"

[[command]]
name = "select weapon"
binding = "DX"

[[command]]
name = "select consumable"
binding = "DY"

[[command]]
name = "menu"
binding = "OPTIONS"

[[command]]
name = "menu right/left"
binding = "DX"

[[command]]
name = "menu up/down"
binding = "DY"

#--------------------------------------------------------------------------------------------------
# Game Conditions
[[condition]]
name = "aiming"
while = [ "aiming" ]

[[condition]]
name = "not aiming"
while = [ "aiming"]
threshold_type = "below"

[[condition]]
name = "sprint"
while = [ "dodge/sprint" ]

# The basic movement condition is %20 of full deflection. This means the user can get away with
# very slow movement, and also prevents moderate joystick drift from triggering actions.
[[condition]]
name = "movement"
while = [ "vertical movement", "horizontal movement" ]  
threshold = 0.2
threshold_type = "distance"

# Fast movement triggers at 80% of full deflection
[[condition]]
name = "fast movement"
while = [ "vertical movement", "horizontal movement" ]  
threshold = 0.8
threshold_type = "distance"

# The equivalent of 'movement' for the camera joystick
[[condition]]
name = "camera"
while = [ "horizontal camera", "vertical camera" ]  
threshold = 0.2
threshold_type = "distance"

# Persistant trigger: set when user selects a weapon, cleared when user selects a consumable
[[condition]]
name = "gun selected"
while = [ "select weapon" ]
clear_on = [ "select consumable" ]

# Persistant trigger: set when user selects a consumable, cleared when user selects a weapon
[[condition]]
name = "consumable selected"
while = [ "select consumable" ]
clear_on = [ "select weapon" ]

#--------------------------------------------------------------------------------------------------
# Sequences
# A sequence holds a series of predefined inputs that are sent as a batch. 
# There are three basic events that can be sent: hold, release, and press. 
#
# Zero out all relevant controls. This is used to stop users from whatever they are doing while
# we take control of the controller, especially before issuing menu commands.
[[sequence]]
name = "disable all"
sequence = [{ event="release", command = "interact" },            # TRIANGLE
            { event="release", command = "crouch/prone" },        # CIRCLE
            { event="release", command = "jump" },                # X
            { event="release", command = "melee" },               # SQUARE
            { event="release", command = "dodge/sprint" },        # L1
            { event="release", command = "aiming" },              # L2
            { event="release", command = "swap/listen" },         # R1
            { event="release", command = "reload/toss" },         # R2
            { event="release", command = "look" },                # L3
            { event="release", command = "flashlight" },          # R3
            { event="release", command = "horizontal movement" }, # LX
            { event="release", command = "vertical movement" },   # LY
            { event="release", command = "horizontal camera" },   # RX
            { event="release", command = "vertical camera" },     # RY
            { event="release", command = "select weapon" },       # DX
            { event="release", command = "select consumable", delay=0.33333 } # DY
]

# Open the main menu (This sequence must exist with this name if the chaos engine uses the menu.)
[[sequence]]
name = "open menu"
sequence = [ { event="press", command = "menu" },
             { event="delay", delay= 0.05 } ]

# Select a menu item  (This sequence must exist with this name if the chaos engine uses the menu.)
[[sequence]]
name = "menu select"
sequence = [ { event="press", command = "select" },
             { event="delay", delay= 0.05 } ]

# Move to the parent menu. (This sequence must exist with this name if the chaos engine uses the
# menu.)
[[sequence]]
name = "menu exit"
sequence = [ { event="press", command = "deselect" },
             { event="delay", delay= 0.05 } ]

# Navigate upward one item in a list of menu options. (This sequence must exist with this name if
# the chaos engine uses the menu.)
[[sequence]]
name = "menu up"
sequence = [ { event="press", command = "menu up/down", value = -1} ]

# Navigate down one item in a list of menu options.  (This sequence must exist with this name if
# the chaos engine uses the menu.)
[[sequence]]
name = "menu down"
sequence = [ { event="press", command = "menu up/down", value = 1} ]

# Increase a multi-state option one level
[[sequence]]
name = "option greater"
sequence = [ { event="press", command = "menu right/left", value = 1} ]

# Decrease a multi-state option one level
[[sequence]]
name = "option less"
sequence = [ { event="press", command = "menu right/left", value = -1} ]

# Confirm an option after selection. In other words, after an option is selected, this sequence is
# issued to answer a yes/no prompt in the affirmative.
[[sequence]]
name = "confirm"
sequence = [ { event="press", command = "menu right/left", value = -1},
             { event="press", command = "select"} ]

# Tab left through sub-menus on the same basic parent menu screen. We don't use this in TLOU 2,
# so the sequence is left blank. (This sequence must exist with this name if the chaos engine needs
# to scroll through a set of menu tabs.)
[[sequence]]
name = "tab left"
sequence = [ ]

# Tab right through sub-menus on the same basic parent menu screen. We don't use this in TLOU 2,
# so the sequence is left blank. (This sequence must exist with this name if the chaos engine needs
# to scroll through a set of menu tabs.)
[[sequence]]
name = "tab right"
sequence = [ ]


#--------------------------------------------------------------------------------------------------
# Menus
[menu]
# Should we use the menu system. If this is set to false, you can skip all the menu layout, but
# menu mods will also not be available.
use_menu = true
# Does the menu system remember the last position in a menu/submenu where the user leaves the
# cursor? This is a placeholder for future expansion. Setting to false has no effect currently.
remember_last = true
# Are items protected by a guard option hidden when the guard option is set to off? Note that
# "hidden" doesn't necessarily mean literally hidden from the user, just that you can't navigate
# to it and navigating down or up will skip over the option.
hide_guarded_items = false

# === Menu Layout ===
# For illustration, TLOU2 menu options that are unused are listed below and commented out. In
# practice, you only need to define the menu items that the engine will actually invoke.
layout = [
      # Main Menu Items
      {name = "options", type="menu", offset = 0},
      #{name = "photo mode", type="menu", offset = 1},
      {name = "audio cues", type="menu", offset = 2, hidden = true, counter_action="reveal"},
      {name = "extras", type="menu", offset = 2},
      #{name = "tutorials", type="menu", offset = 3},
      #{name = "save", type="menu", offset = 4},
      #{name = "load", type="menu", offset = 5},
      #{name = "restart 2", type="menu", offset = -3, hidden = true},
      {name = "restart", type="select", offset = -2, confirm = true },
      #{name = "quit", type="menu", offset = -1}

      # Options Menu
      #{name = "difficulty", type="menu", parent="options", offset= 0},
      {name = "controls", type="menu", parent="options", offset= 1},
      {name = "HUD", type="menu", parent="options", offset= 2},
      {name = "subtitles", type="menu", parent="options", offset= 3},
      {name = "display", type="menu", parent="options", offset= 4},
      {name = "audio", type="menu", parent="options", offset= 5},
      #{name = "language", type="menu", parent="options", offset= -2},
      {name = "accessibility", type="menu", parent="options", offset= -1},

      # Extras Menu
      # The initial setting for a submenu refers to which submenu item is selected by default.
      # That is the state to which the game will return when all mods changing the render mode are
      # removed.
      {name = "render", type="menu", parent="extras", offset= 0, initial=0},
      {name = "gameplay", type="menu", parent="extras", offset= 1},

      # Options -> Controls 
      #{name = "view controls", type="menu", parent="controls", offset= 0},
      #{name = "customize controls", type="menu", parent="controls", offset= 1},
      {name = "shoulder swap", type="option", parent="controls", offset= 2, initial=0},
      #{name = "photo mode shortcut", type="option", parent="controls", offset= 3, initial=0},
      {name = "listen mode", type="option", parent="controls", offset= 4, initial=1},
      #{name = "look sensitivity X", type="option", parent="controls", offset= 5, initial=5},
      #{name = "look sensitivity Y", type="option", parent="controls", offset= 6, initial=5},
      #{name = "aim sensitivity X", type="option", parent="controls", offset= 7, initial=5},
      #{name = "aim sensitivity Y", type="option", parent="controls", offset= 8, initial=5},
      #{name = "aim acceleration", type="option", parent="controls", offset= 9, initial=10},
      #{name = "aim ramp power", type="option", parent="controls", offset= 10, initial=10},
      #{name = "motion aim", type="option", parent="controls", offset= -9, initial=0},
      #{name = "motion sensitivity X", type="option", parent="motion aim", offset= -8, initial=5},
      #{name = "motion sensitivity Y", type="option", parent="motion aim", offset= -7, initial=5},
      #{name = "motion aim invert Y", type="option", parent="controls", offset= -6, initial=0},
      #{name = "motion aim mirror X", type="option", parent="controls", offset= -5, initial=0},
      {name = "camera assist", type="option", parent="controls", offset= -4, initial=0},
      {name = "aim assist", type="option", parent="controls", offset= -3, initial=10},
      {name = "lock-on aim", type="option", parent="controls", offset= -2, initial=0},
      {name = "lock-on strength", type="option", parent="controls", guard="lock-on aim", offset= -1, initial=10},

      # Options -> HUD Menu Items
      # reticle states: 0 = off, 1 = simple, 2 = default
      {name = "reticle", type="option", parent="HUD", offset=0, initial=2},
      {name = "weapon cross", type="option", parent="HUD", offset=1, initial=1},
      {name = "damage indicators", type="option", parent="HUD", offset=2, initial=1},
      {name = "awareness indicators", type="option", parent="HUD", offset=3, initial=1},
      {name = "hit markers", type="option", parent="HUD", offset=4, initial=1},
      {name = "arc throw path", type="option", parent="HUD", offset=5, initial=1},
      {name = "health and weapon", type="option", parent="HUD", offset=6, initial=1},
      {name = "health bar", type="option", parent="HUD", guard="health and weapon", offset=7, initial=1},
      {name = "weapon and ammo display", type="option", parent="HUD", guard="health and weapon", offset=8, initial=1},
      {name = "status effects", type="option", parent="HUD", guard="health and weapon", offset=9, initial=1},
      #{name = "tutorial messages", type="option", parent="HUD", offset=-8, initial=0},
      #{name = "hints", type="option", parent="HUD", offset=-7, initial=0},
      {name = "pickup notifications", type="option", parent="HUD", offset=-6, initial=0},
      #{name = "dodge prompts", type="option", parent="HUD", offset=-5, initial=0},
      #{name = "grab/strike prompts", type="option", parent="HUD", offset=-4, initial=0},
      #{name = "pickup prompts", type="option", parent="HUD", offset=-3, initial=1},
      #{name = "interact prompts", type="option", parent="HUD", offset=-2, initial=1},
      #{name = "collectibel tracking", type="option", parent="HUD", offset=-1, initial=0},

      # Options -> Subtitle Menu
      # subtitle states: 0 = off, 1 = story, 2 = story + combat
      {name = "subtitle type", type="option", parent="subtitles", offset=0, initial=2},
      # subtitle size: 0 = small, 1 = medium, 2 = large
      {name = "subtitle size", type="option", parent="subtitles", offset=1, initial=1},
      #{name = "subtitle background", type="option", parent="subtitles", offset=2, initial=0},
      #{name = "subtitle names", type="option", parent="subtitles", offset=3, initial=1},
      #{name = "subtitle name colors", type="option", parent="subtitles", offset=-3, initial=0},
      #{name = "subtitle direction", type="option", parent="subtitles", offset=-2, initial=0},
      #{name = "subtitle color", type="option", parent="subtitles", offset=-1, initial=0},

      # Options -> Display Menu
      #{name = "brightness", type="menu", parent="display", offset=0, initial=0},
      #{name = "safezone scale", type="menu", parent="display", offset=1, initial=0},
      # framerate: 0 = 30fps, 1 = 60fps
      {name = "framerate", type="option", parent="display", offset=2, initial=1},
      #{name = "motion blur", type="option", parent="display", offset=3, initial=10},
      #{name = "camera shake", type="option", parent="display", offset=-2, initial=10},
      #{name = "film grain", type="option", parent="display", offset=-1, initial=10},

      # Options -> Audio Menu
      {name = "effects", type="option", parent="audio", offset=0, initial=20},
      {name = "dialogue", type="option", parent="audio", offset=1, initial=20},
      {name = "music", type="option", parent="audio", offset=2, initial=20},
      #{name = "cinematics", type="option", parent="audio", offset=3, initial=20},
      #{name = "accessibility cue levels", type="option", parent="audio", offset=4, initial=20},
      #{name = "text-to-speech levels", type="option", parent="audio", offset=5, initial=10},
      #{name = "device", type="option", parent="audio", offset=6, initial=0},
      #{name = "channels", type="option", parent="audio", offset=-5, initial=0},
      #{name = "center channel", type="option", parent="audio", offset=-4, initial=0},
      #{name = "dynamic range", type="option", parent="audio", offset=-5, initial=0},
      {name = "mono", type="option", parent="audio", offset=-2, initial=0},
      #{name = "front", type="option", parent="audio", offset=-1, initial=0},

      # Options -> Accessibility Menu
      {name = "alternate controls", type="menu", parent="accessibility", offset=0},
      {name = "magnification", type="menu", parent="accessibility", offset = 1},
      {name = "motion sickness", type="menu", parent="accessibility", offset = 2},
      {name = "navigation", type="menu", parent="accessibility", offset = 3},
      {name = "TTS and audio", type="menu", parent="accessibility", offset = -2},
      {name = "combat accessibility", type="menu", parent="accessibility", offset = -1},

      # Options -> Accessibility -> Alternate Controls
      # The first three commented out here are duplicates of entries in Options -> Controls
      #{name = "camera assist", type="option", parent="alternate controls", offset=-7, initial=0},
      #{name = "lock-on aim", type="option", parent="alternate controls", offset=-6, initial=0},
      #{name = "lock-on strength", type="option", parent="alternate controls", guard="lock-on aim", offset=-5, initial=10},
      {name = "arc throw lock-on", type="option", parent="alternate controls", offset=-4, initial=0},
      {name = "auto weapon swap", type="option", parent="alternate controls", offset=-2, initial=0},
      {name = "auto pick-up", type="option", parent="alternate controls", offset=-1, initial=0},

      # Options -> Accessibility -> Magnification Menu
      {name = "HUD scale", type="option", parent="magnification", offset=0, initial=0},
      #{name = "HUD background", type="option", parent="magnification", offset=1, initial=1},
      #{name = "HUD color", type="option", parent="magnification", offset=2, initial=0},
      #{name = "HUD colorblind mode", type="option", parent="magnification", offset=3, initial=0},
      {name = "HUD flashing", type="option", parent="magnification", offset=4, initial=1},
      {name = "high contrast", type="option", parent="magnification", offset=-3, initial=0},
      #{name = "screen magnifier", type="option", parent="magnification", offset=-2, initial=0},
      #{name = "translation prompts", type="option", parent="magnification", offset=-1, initial=0},

      # Options -> Accessibility -> Motion Sickness
      #{name = "camera shake", type="option", parent="motion sickness", offset=0, initial=10},
      #{name = "motion blur", type="option", parent="motion sickness", offset=1, initial=10},      
      # For camera distance and field of view, -5 = 0, 0 = 6
      {name = "camera distance", type="option", parent="motion sickness", offset=2, initial=6},
      {name = "field of view", type="option", parent="motion sickness", offset=3, initial=6},
      #{name = "dolly zoom", type="option", parent="motion sickness", offset=-3, initial=1},
      #{name = "full screen effects", type="option", parent="motion sickness", offset=-2, initial=1},
      #{name = "persistent center dot", type="option", parent="motion sickness", offset=-1, initial=0},

      # Options -> Accessibility -> Navigation and Traversal
      {name = "navigation assistance", type="option", parent="navigation", offset=0, initial=0},
      {name = "traversal assistance", type="option", parent="navigation", offset=1, initial=0},
      {name = "ledge guard", type="option", parent="navigation", offset=2, initial=0},
      {name = "enhanced listen", type="option", parent="navigation", offset=3, initial=0},
      {name = "scan range", type="option", parent="navigation", guard="enhanced listen", offset=4, initial=10},
      {name = "scan time", type="option", parent="navigation", guard="enhanced listen", offset=5, initial=3},
      {name = "infinite breath", type="option", parent="navigation", offset=-2, initial=0},
      #{name = "skip puzzle", type="option", parent="navigation", offset=-1, initial=0},

      # Options -> Accessibility -> Text-to-Speech and Audio Cues
      {name = "text-to-speech", type="option", parent="TTS and audio", offset = 0, initial=0, counter="audio cues"},
      {name = "traversal cues", type="option", parent="TTS and audio", offset = 1, initial=0, counter="audio cues"},
      {name = "combat cues", type="option", parent="TTS and audio", offset = 2, initial=0, counter="audio cues"},
      #{name = "combat vibration", type="option", parent="TTS and audio", offset = 3, initial=0},
      #{name = "guitar vibration", type="option", parent="TTS and audio", offset = -3, initial=0},
      #{name = "audio volumes", type="menu", parent="TTS and audio", offset = -2, initial=0},
      #{name = "cue glossary", type="menu", parent="TTS and audio", offset = -1, initial=0},

      # Options -> Accessibility -> Combat Accessibility
      {name = "enable combat accessibility", type="option", parent="combat accessibility", offset = 0, initial=0},
      {name = "hostages don't escape", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = 1, initial=0},
      {name = "allies don't get grabbed", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = 2, initial=0},
      {name = "enemies don't flank", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = 3, initial=0},
      {name = "reduced enemy perception", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = 4, initial=0},
      {name = "reduced enemy accuracy", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = 5, initial=0},
      {name = "enhanced dodge", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = -4, initial=0},
      {name = "invisible while prone", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = -3, initial=0},
      {name = "weapon sway", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = -2, initial=1},
      # slow motion duplicate of extras option
      #{name = "slow motion", type="option", parent="combat accessibility", guard="enable combat accessibility", offset = -1, initial=0},

      # Extras -> Render Modes Menu
      {name = "no render", type = "select", parent="render", offset = 0, counter="render"},
      {name = "graphic", type = "select", parent="render", offset = 1, counter="render"},
      {name = "headache", type = "select", parent="render", offset = 2, counter="render"},
      {name = "afterlife", type = "select", parent="render", offset = 3, counter="render"},
      {name = "eightbit", type = "select", parent="render", offset = 4, counter="render"},
      {name = "watercolor", type = "select", parent="render", offset = 5, counter="render"},
      {name = "dungeon", type = "select", parent="render", offset = 6, counter="render"},
      {name = "void", type = "select", parent="render", offset = 7, counter="render"},
      {name = "pop poster", type = "select", parent="render", offset = 8, counter="render"},
      {name = "1960", type = "select", parent="render", offset = 9, counter="render"},
      {name = "cool", type = "select", parent="render", offset = 10, counter="render"},
      {name = "warm", type = "select", parent="render", offset = 11, counter="render"},
      {name = "vibrant", type = "select", parent="render", offset = 12, counter="render"},
      {name = "noir", type = "select", parent="render", offset = 13, counter="render"},
      {name = "blorange", type = "select", parent="render", offset = 14, counter="render"},
      {name = "sepia", type = "select", parent="render", offset = 15, counter="render"},
      {name = "vintage", type = "select", parent="render", offset = -14, counter="render"},
      {name = "beasts", type = "select", parent="render", offset = -13, counter="render"},
      {name = "terminated", type = "select", parent="render", offset = -12, counter="render"},
      {name = "gridlocked", type = "select", parent="render", offset = -11, counter="render"},
      {name = "blacklight", type = "select", parent="render", offset = -10, counter="render"},
      {name = "desert fog", type = "select", parent="render", offset = -9, counter="render"},
      {name = "blood", type = "select", parent="render", offset = -8, counter="render"},
      {name = "inferno", type = "select", parent="render", offset = -7, counter="render"},
      {name = "fire", type = "select", parent="render", offset = -6, counter="render"},
      {name = "trinity", type = "select", parent="render", offset = -5, counter="render"},
      {name = "pusher", type = "select", parent="render", offset = -4, counter="render"},
      {name = "demons", type = "select", parent="render", offset = -3, counter="render"},
      {name = "drugzone", type = "select", parent="render", offset = -2, counter="render"},
      {name = "moonlight", type = "select", parent="render", offset = -1, counter="render"},

      # Extras -> Gameplay Menu
      {name = "mirror", type="option", parent="gameplay", offset = 0, initial = 0},
      {name = "mirror on death", type="option", parent="gameplay", offset = 1, initial = 0},
      {name = "slow motion", type="option", parent="gameplay", offset = 2, initial = 0},
      {name = "bullet speed", type="option", parent="gameplay", offset = 3, initial = 0},
      {name = "infinite ammo", type="option", parent="gameplay", offset = 4, initial = 0},
      {name = "infinite crafting", type="option", parent="gameplay", offset = 5, initial = 0},
      {name = "infinite melee durability", type="option", parent="gameplay", offset = 6, initial = 0},
      {name = "infinite listen range", type="option", parent="gameplay", offset = 7, initial = 0},
      {name = "one shot", type="option", parent="gameplay", offset = -6, initial = 0},
      {name = "touch of death", type="option", parent="gameplay", offset = -5, initial = 0},
      {name = "8-bit audio", type="option", parent="gameplay", offset = -4, initial = 0}, 
      {name = "4-bit audio", type="option", parent="gameplay", offset = -3, initial = 0},
      {name = "helium audio", type="option", parent="gameplay", offset = -2, initial = 0},
      {name = "xenon audio", type="option", parent="gameplay", offset = -1, initial = 0},
]

#--------------------------------------------------------------------------------------------------
# Gameplay Modifiers
#
# == Disable Modifiers ==
#
[[modifier]]
name = "No Melee"
description = "Disable melee attacks and stealth kills"
type = "disable"
groups = [ "combat" ]
applies_to = [ "melee" ]

[[modifier]]
name = "Melee Only"
description = "No shooting and no throwables"
type = "disable"
groups = [ "combat" ]
applies_to = [ "reload/toss" ]

[[modifier]]
name = "Pacifist%"
description = "No shooting, throwing, or melee. Good luck, NPC friends!"
type = "disable"
groups = [ "combat" ]
applies_to = [ "melee", "reload/toss" ]

[[modifier]]
name = "No Climbing/Jumping"
description = "No climbing or jumping"
type = "disable"
groups = [ "movement" ]
applies_to = [ "jump" ]

[[modifier]]
name = "No Grab"
description = "Swiper no swiping! No looting, stealth grabbing, opening doors. Say goodbye to the everything button."
type = "disable"
groups = [ "interact" ]
applies_to = [ "interact" ]

[[modifier]]
name = "No Crouch/Prone"
description = "And you thought you were going to sneak through this area"
type = "disable"
groups = [ "movement" ]
applies_to = [ "crouch/prone" ]
begin_sequence = [ { event = "release", command = "crouch/prone" } ]

[[modifier]]
name = "No Run/Dodge"
description = "Better hope you're not being chased."
type = "disable"
groups = [ "movement" ]
applies_to = [ "dodge/sprint" ]
begin_sequence = [ { event = "release", command = "dodge/sprint" } ]

[[modifier]]
name = "No Aiming"
description = "At least reloading is still possible, along with throwables and melee"
type = "disable"
groups = [ "combat" ]
applies_to = [ "aiming" ]
begin_sequence = [ { event = "release", command = "aiming" } ]

[[modifier]]
name = "No Horizontal Aim"
description = "The horizontal camera is disabled"
type = "disable"
groups = [ "view" ]
applies_to = [ "horizontal camera" ]

[[modifier]]
name = "No Scoping"
description = "No scopes! Aiming is still allowed"
type = "disable"
groups = [ "combat" ]
applies_to = [ "scope" ]
while = [ "aiming" ]

[[modifier]]
name = "No Shoulder Swap"
description = "While aiming, Square is disabled"
type = "disable"
groups = [ "combat" ]
applies_to = [ "shoulder swap" ]
while = [ "aiming" ]

[[modifier]]
name = "No Reloading"
description = "You can still shoot, but you can't reload."
type = "disable"
groups = [ "combat" ]
applies_to = [ "reload/toss" ]
while = [ "gun selected", "not aiming" ]

[[modifier]]
name = "Disable Camera"
description = "Good luck with aiming and looking around!"
type = "disable"
groups = [ "view" ]
applies_to = [ "vertical camera", "horizontal camera" ]

[[modifier]]
name = "Disable D-pad"
description = "Inventory selection is disabled"
type = "disable"
groups = [ "combat", "inventory" ]
applies_to = [ "select weapon", "select consumable" ]

[[modifier]]
name = "Moose"
description = "The moose is dead. The moose does not move. (Disables movement)"
type = "disable"
groups = [ "movement" ]
applies_to = [ "vertical movement", "horizontal movement" ]

[[modifier]]
name = "Only Strafe Movement"
description = "Side-to-side movement is disabled. Only forward/back motion is allowed."
type = "disable"
groups = [ "movement" ]
applies_to = [ "horizontal movement" ]

[[modifier]]
name = "No Strafing"
description = "Forwards/back movement is disabled. Only side-to-side motion is allowed."
type = "disable"
groups = [ "movement" ]
applies_to = [ "vertical movement" ]

[[modifier]]
name = "Only Aim Movement"
description = "Movement is disabled if not aiming"
type = "disable"
groups = [ "movement" ]
applies_to = [ "vertical movement", "horizontal movement" ]
while = [ "not aiming" ]

[[modifier]]
name = "No Aim Movement"
description = "Movement is disabled if aiming"
type = "disable"
groups = [ "movement" ]
applies_to = [ "vertical movement", "horizontal movement" ]
while = [ "aiming" ]

[[modifier]]
name = "No Aiming Camera"
description = "Camera is disabled if aiming"
type = "disable"
groups = [ "view" ]
applies_to = [ "vertical camera", "horizontal camera" ]
while = [ "aiming" ]

[[modifier]]
name = "Nascar"
description = "There is no going right in Nascar. Right movement/camera disabled"
type = "disable"
groups = [ "movement", "view" ]
applies_to = [ "horizontal movement", "horizontal camera" ]
filter = "above"

[[modifier]]
name = "Zoolander"
description = "We are not an ambiturner, but at least we can look right. Left movement/camera disabled."
type = "disable"
groups = [ "movement", "view" ]
applies_to = [ "horizontal movement", "horizontal camera" ]
filter = "below"

[[modifier]]
name = "No Backward Movement"
description = "Moving backwards is not allowed"
type = "disable"
groups = [ "movement" ]
applies_to = [ "vertical movement" ]
filter = "above"

[[modifier]]
name = "No Forward Movement"
description = "Moving forward is not allowed"
type = "disable"
groups = [ "movement" ]
applies_to = [ "vertical movement" ]
filter = "below"

[[modifier]]
name = "No Gun Selection"
description = "No picking a new gun"
type = "disable"
groups = [ "combat" ]
applies_to = [ "select weapon" ]
begin_sequence = [ { event = "release", command = "select weapon" },
                  { event= "press", command = "select consumable" } ]

[[modifier]]
name = "No Short Guns"
description = "D-Pad Right Disabled"
type = "disable"
groups = [ "combat" ]
filter = "above"
applies_to = [ "select weapon" ]
begin_sequence = [ { event = "release", command = "select weapon" },
                  { event= "press", command = "select consumable" } ]

[[modifier]]
name = "No Long Guns"
description = "D-Pad Left Disabled"
type = "disable"
groups = [ "combat" ]
filter = "below"
applies_to = [ "select weapon" ]
begin_sequence = [ { event = "release", command = "select weapon" },
                  { event= "press", command = "select consumable" } ]

[[modifier]]
name = "No Consumables"
description = "Selecting a brick, bottle, med kit, molly, etc. is disabled."
type = "disable"
groups = [ "combat", "inventory" ]
applies_to = [ "select consumable" ]
begin_sequence = [ { event = "release", command = "select consumable" },
                  { event= "press", command = "select weapon" } ]

# == Scaling Modifiers ==
#
[[modifier]]
name = "Inverted"
description = "Inverts the vertical axis for aiming"
type = "scaling"
groups = [ "view" ]
applies_to = [ "vertical camera" ]
amplitude = -1

[[modifier]]
name = "Moonwalk"
description = "Be like Michael Jackson! Trying to walk forward will actually make you go backward."
type = "scaling"
groups = [ "movement" ]
applies_to = [ "vertical movement" ]
amplitude = -1

[[modifier]]
name = "Sideways Moonwalk"
description = "Go left to go right and go right to go left"
type = "scaling"
groups = [ "movement" ]
applies_to = [ "horizontal movement" ]
amplitude = -1

[[modifier]]
name = "Max Sensitivity"
description = "Goodbye precision aiming. Joystick postions multiplied by 5."
type = "scaling"
groups = [ "movement", "view" ]
applies_to = [ "horizontal movement", "vertical movement", "horizontal camera", "vertical camera"  ]
amplitude = 5.0

[[modifier]]
name = "Min Sensitivity"
description = "It's like slomo, but not for the enemies. Joystick positions divided by 2.5."
type = "scaling"
groups = [ "movement", "view" ]
applies_to = [ "horizontal movement", "vertical movement", "horizontal camera", "vertical camera"  ]
amplitude = 0.4

[[modifier]]
name = "Drift Left"
description = "You've now got controller drift"
type = "scaling"
groups = ["movement"]
applies_to = [ "horizontal movement" ]
offset = -30

# == Cooldown Modifiers ==
#
[[modifier]]
name = "Bad Stamina"
description = "Running is disabled after 2 seconds and takes 4 seconds to recharge."
type = "cooldown"
groups = [ "movement" ]
applies_to = [ "dodge/sprint" ]
while = [ "movement", "sprint" ]
cumulative = true
time_on = 2.0
time_off = 4.0

[[modifier]]
name = "Snapshot"
description = "You can only aim for 1 second at a time, so take that shot quickly."
type = "cooldown"
groups = [ "combat" ]
applies_to = [ "aiming" ]
while = [ "aiming" ]
time_on = 1.0
time_off = 3.0

[[modifier]]
name = "Sniper Speed"
description = "Take your time between shots. No shooting or reloading for 5-seconds after each shot."
type = "cooldown"
groups = [ "combat" ]
applies_to = [ "shoot" ]
while = [ "aiming", "shoot" ]
time_on = 0.1
time_off = 5.0

[[modifier]]
name = "You Good?"
description = "Other than being really old? Melee takes a lot out of you. 5-second delay between melee attacks."
type = "cooldown"
groups = [ "combat" ]
applies_to = [ "melee" ]
while = [ "melee" ]
time_on = 0.1
time_off = 5.0

[[modifier]]
name = "Red Light/Green Light"
description = "After moving for 5 seconds, wait for another 5 seconds."
type = "cooldown"
groups = [ "movement" ]
applies_to = [ "vertical movement", "horizontal movement" ]
while = [ "movement" ]
cumulative = true
time_on = 5.0
time_off = 5.0

# == Repeat Modifiers ==
#
[[modifier]]
name = "Keep Proning"
description = "Proning at inconvenient times"
type = "repeat"
groups = [ "movement" ]
applies_to = [ "crouch/prone" ]
time_on = 2.0
time_off = 2.0
begin_sequence = [{ event = "release", command = "crouch/prone" }]
finish_sequence = [{ event = "release", command = "crouch/prone" }]

[[modifier]]
name = "Factions Pro"
description = "Keeping things toxic with teabagging"
type = "repeat"
groups = [ "movement" ]
applies_to = [ "crouch/prone" ]
time_on = 0.1
time_off = 0.6
begin_sequence = [{ event = "release", command = "crouch/prone" }]
finish_sequence = [{ event = "release", command = "crouch/prone" }]

[[modifier]]
name = "Anthony Caliber"
description = "Flashlight flickering"
type = "repeat"
applies_to = [ "flashlight" ]
time_on = 0.066667
time_off = 0.089583
repeat = 8
cycle_delay = 4.0
begin_sequence = [{ event = "release", command = "flashlight" }]
finish_sequence = [{ event = "release", command = "flashlight" }]

[[modifier]]
name = "Keep Jumping"
description = "Repeated presses of jump"
type = "repeat"
groups = [ "movement" ]
applies_to = [ "jump" ]
time_on = 0.1
time_off = 2.0
begin_sequence = [{ event = "release", command = "jump" }]
finish_sequence = [{ event = "release", command = "jump" }]

[[modifier]]
name = "Rachy Flail"
description = "The only way to melee is to follow the master techniques of RachyMonster"
type = "repeat"
groups = [ "combat" ]
applies_to = [ "melee" ]
time_on = 0.1
time_off = 1.2
begin_sequence = [{ event = "release", command = "melee" }]
finish_sequence = [{ event = "release", command = "melee" }]

[[modifier]]
name = "Keep Dodging"
description = "Repeaated dodges. Don't stand too near a ledge"
type = "repeat"
groups = [ "movement" ]
applies_to = [ "dodge/sprint" ]
time_on = 0.1
time_off = 2.0
begin_sequence = [{ event = "release", command = "dodge/sprint" }]
finish_sequence = [{ event = "release", command = "dodge/sprint" }]

[[modifier]]
name = "Periodic Listen Mode"
description = "Stop. Look. Listen to your heart. Hear what it's saying."
type = "repeat"
groups = [ "view" ]
applies_to = [ "swap/listen" ]
time_on = 3.0
time_off = 8.0
begin_sequence = [{ event = "release", command = "swap/listen" }]
finish_sequence = [{ event = "release", command = "swap/listen" }]

[[modifier]]
name = "Force Running"
description = "To move is to run (mostly)."
type = "repeat"
groups = [ "movement" ]
applies_to = [ "dodge/sprint" ]
time_on = 4.0
time_off = 0.1
force_on = [ 1 ]
begin_sequence = [{ event = "hold", command = "dodge/sprint" }]
finish_sequence = [{ event = "release", command = "dodge/sprint" }]

[[modifier]]
name = "Leeroy Jenkins"
description = "Alright let's do this! LEEEEROOOOOY NNNJEEEENNKIINNS!!! (Holds forward and sprint)"
type = "repeat"
groups = [ "movement" ]
applies_to = [ "dodge/sprint", "vertical movement" ]
begin_sequence = [ { event="hold", command = "dodge/sprint"},
      { event ="hold", command = "vertical movement", value = -128 } ]
force_on = [ 1, -128 ]
block_while_busy = [ "vertical movement" ]
time_on = 5.0
time_off = 0.1
finish_sequence = [ { event="release", command = "vertical movement"},
       { event="release", command = "dodge/sprint"}  ]

[[modifier]]
name = "Sir Robin"
description = "When danger reared its ugly head, He bravely turned his tail and fled! (Force run backwards)"
type = "repeat"
groups = [ "movement" ]
applies_to = [ "dodge/sprint", "vertical movement" ]
begin_sequence = [ { event="hold", command = "dodge/sprint"},
      { event ="hold", command = "vertical movement", value = 128 } ]
force_on = [1, 128]
block_while_busy = [ "vertical movement" ]
time_on = 5.0
time_off = 0.1
finish_sequence = [ { event="release", command = "vertical movement"},
       { event="release", command = "dodge/sprint"}  ]


[[modifier]]
name = "Force Aiming"
description = "The aiming button is held"
type = "repeat"
groups = [ "combat" ]
applies_to = [ "aiming" ]
time_on = 4.0
time_off = 0.1
force_on = [ 1 ]

# This is a child-only mod: part of the Navigation Assistance parent mod
[[modifier]]
name = "Periodic Navigation Assistance"
description = "Keeps pointing camera in direction of story progression"
type = "repeat"
applies_to = [ "look" ]
time_on = 0.1
time_off = 5.0
unlisted = true

# == Remap Modifiers ==
#
[[modifier]]
name = "D-pad Rotate"
description = "Rotates the D-pad inputs clockwise"
type = "remap"
remap = [
      {from = "DX", to = "DY"},
      {from = "DY", to = "DX", invert = true} ]

[[modifier]]
name = "Swap Joysticks"
description = "You may want to cross your thumbs to work with your muscle memory"
type = "remap"
remap = [
      {from = "RX", to = "LX"},
      {from = "RY", to = "LY"},
      {from = "LX", to = "RX"},
      {from = "LY", to = "RY"} ]

[[modifier]]
name = "Criss-Cross Joysticks"
description = "Swap vertical and horizontal joystick axes. Up and down are now left and right."
type = "remap"
remap = [
      {from = "RX", to = "RY"},
      {from = "RY", to = "RX"},
      {from = "LX", to = "LY"},
      {from = "LY", to = "LX"} ]

[[modifier]]
name = "Swap D-pad/Left Joystick"
description = "Retro-style motion and an odd analog inventory selector"
type = "remap"
disable_signals = [ "LX", "LY" ]
remap = [
      {from = "DX", to = "LX"},
      {from = "DY", to = "LY"},
      {from = "LX", to = "DX"},
      {from = "LY", to = "DY"} ]

[[modifier]]
name = "Swap Shapes/Right Joystick"
description = "Analog actions and digital camera movement"
type = "remap"
disable_signals = [ "RX", "RY" ]
remap = [
      {from = "RX", to = "CIRCLE", to_neg = "SQUARE", threshold=0.5},
      {from = "RY", to = "TRIANGLE", to_neg = "X", threshold=0.5},
      {from = "SQUARE", to = "RX", to_min = true},
      {from = "CIRCLE", to = "RX"},
      {from = "TRIANGLE", to = "RY", to_min = true},
      {from = "X", to = "RY"} ]

[[modifier]]
name = "Motion Control Movement"
description = "No more movement with the joystick. Tilt the controller to move instead."
type = "remap"
disable_signals = [ "LX", "LY" ]
remap = [
      {from = "ACCX", to = "LX", sensitivity=20},
      {from = "ACCZ", to = "LY", sensitivity=20},
      {from = "LX", to = "NOTHING"},
      {from = "LY", to = "NOTHING"}
      ]

# In TLOU, this could just as well be accomplished with a menu option. It's done this way
# for parallelism with Motion Control Movement, and to test the sensitivity settings.
[[modifier]]
name = "Motion Control Aiming"
description = "No more aiming with the joystick. Tilt the controller to aim/look instead."
type = "remap"
disable_signals = [ "RX", "RY" ]
remap = [
      {from = "ACCX", to = "RX", sensitivity=24},
      {from = "ACCZ", to = "RY", sensitivity=24},
      {from = "RX", to = "NOTHING"},
      {from = "RY", to = "NOTHING"}
      ]

# Note for touchpad remapping, TOUCHPAD_ACTIVE must be included in the remap list so that
# starting and stopping touchpad use can be initialized properly. Also, the axes that are
# being remapped should all be in the disable_signals list as well as the remap table.
# Otherwise, they won't be properly set to 0 when the user stops aiming.
[[modifier]]
name = "Touchpad Aiming"
description = "No more aiming with the joystick. Finally making use of the touchpad!"
type = "remap"
disable_signals = [ "RX", "RY" ]
remap = [
      {from = "TOUCHPAD_ACTIVE", to="NOTHING"},
      {from = "TOUCHPAD_X", to="RX"},
      {from = "TOUCHPAD_Y", to="RY"},
      {from = "RX", to="NOTHING"},
      {from = "RY", to="NOTHING"}
      ]

[[modifier]]
name = "Controller Mirror"
description = "Left and right joysticks are swapped. R2 is now L2. Circle is D-pad left, etc."
type = "remap"
remap = [
      {from = "LX", to = "RX"},
      {from = "LY", to = "RY"},
      {from = "RX", to = "LX"},
      {from = "RY", to = "LY"},
      {from = "DX", to = "CIRCLE", to_neg = "SQUARE"},
      {from = "DY", to = "TRIANGLE", to_neg = "X"},
      {from = "R1", to = "L1"},
      {from = "L1", to = "R1"},
      {from = "L2", to = "R2"},
      {from = "R2", to = "L2"},
      {from = "SQUARE", to = "DX", to_min = true},
      {from = "CIRCLE", to = "DX"},
      {from = "TRIANGLE", to = "DY", to_min = true},
      {from = "X", to = "DY"} ]

[[modifier]]
name = "Controller Flip"
description = "Up is down. Joysticks and D-pad inverted vertially, L1 swapped with L2, Triangle swapped with X, etc."
type = "remap"  
remap = [
      {from = "DY", to = "DY", invert = true},
      {from = "LY", to = "LY", invert = true},
      {from = "RY", to = "RY", invert = true},
      {from = "R1", to = "R2"},
      {from = "L1", to = "L2"},
      {from = "R2", to = "R1"},
      {from = "L2", to = "L1"},
      {from = "TRIANGLE", to = "X"},
      {from = "X", to = "TRIANGLE"}
      ]

[[modifier]]
name = "Shape Shuffle"
description = "Randomly remaps the shape buttons (square, circle, triangle, X)"
type = "remap"
random_remap = [ "X", "SQUARE", "CIRCLE", "TRIANGLE" ]

[[modifier]]
name = "Random Remap"
description = "Randomly remaps buttons (square, circle, triangle, X, L1, R1, L2, R2, L3, R3)"
type = "remap"
random_remap = [ "X", "SQUARE", "CIRCLE", "TRIANGLE", "L1", "L2", "L3", "R1", "R2", "R3" ]
  
[[modifier]]
name = "Trigger Remap"
description = "Randomly remaps trigger/bumper buttons (L1, R1, L2, R2)"
type = "remap"  
random_remap = [ "L1", "L2", "R1", "R2" ]

# == Formula Modifiers ==
#
[[modifier]]
name = "Mega Scope Sway"
description = "Good luck landing shots"
type = "formula"
groups = [ "combat", "view" ]
applies_to = [ "horizontal camera", "vertical camera" ]
while =  [ "aiming" ]
formula_type = "eight_curve"
period_length = 0.5 
amplitude = 0.5

[[modifier]]
name = "TLOU1 Run Glitch"
description = "Is this an Any% speedrun of TLOU1? Rapid D-pad circular presses. Try moving while prone."
type = "formula"
groups = [ "movement", "inventory" ]
applies_to = [ "select weapon", "select consumable" ]
formula_type = "circle"
period_length = 0.25
amplitude = 1.0

[[modifier]]
name = "Random Movement"
description = "Random joystick motion"
type = "formula"
applies_to = [ "horizontal movement", "vertical movement", "horizontal camera", "vertical camera"  ]
groups = [ "movement", "view" ]
formula_type = "janky"
amplitude = 0.6
period_length = 5.0

# === Sequence Modifier ===
#
[[modifier]]
name = "Desk Pop"
description = "We honor the flag, and you crap on it when you don't shoot your gun https://www.youtube.com/watch?v=wWZTTtE5_zQ"
type = "sequence"
groups = [ "combat" ]
block_while_busy = "ALL"
begin_sequence = [
  { event = "press", command = "select weapon", delay = 1.0 },
  { event = "hold", command = "aiming", delay = 1.0 },
  { event = "press", command ="shoot" },
  { event = "release", command = "aiming" }
  ]

[[modifier]]
name = "Stumblebum"
description = "Fast movement will make you go prone"
type = "sequence"
groups = [ "movement"]
block_while_busy = [ "dodge/sprint", "crouch/prone" ]
while = [ "fast movement" ]
trigger = [ "vertical movement", "horizontal movement", "dodge/sprint" ]
cycle_delay = 1.0
repeat_sequence = [  
  { event = "press", command = "dodge/sprint", delay = 0.1 },
  { event = "press", command = "crouch/prone", delay = 0.8 },
  { event = "release", command = "crouch/prone"},
  { event = "release", command = "dodge/sprint"}
  ]
begin_sequence = [ { event = "release", command = "dodge/sprint" },
                  { event = "release", command = "crouch/prone" }]
finish_sequence = [{ event = "release", command = "dodge/sprint" },
                  { event = "release", command = "crouch/prone" }]

[[modifier]]
name = "Double Tap"
description = "It's Rule #2. Everytime a shot is fired, another occurs in quick succession. For Rule #1, see Leeroy Jenkins."
type = "sequence"
groups = [ "combat" ]
block_while_busy = [ "aiming", "shoot" ]
while = [ "aiming" ]
trigger = [ "shoot" ]
start_delay = 0.2
repeat_sequence = [
  { event = "release", command = "shoot", delay = 1.0 },
  { event = "hold", command = "shoot", delay = 0.2 },
  { event = "release", command = "shoot" }
  ]

[[modifier]]
name = "Use Items"
description = "Shoots or throws 6 of whatever item is currently equipped. No effect for medkits."
type = "sequence"
groups = [ "combat", "inventory" ]
block_while_busy = [ "aiming", "reload/toss" ]
begin_sequence = [
  { event="hold", command = "aiming", delay = 1.0 },
  { event="press", command = "shoot", repeat = 6, delay = 0.25 },
  { event="release", command = "aiming" }
  ]

[[modifier]]
name = "Toss A Molly/Bomb"
description = "Time to riot. Chucks a molly (for Ellie) or bomb (for Abby)."
type = "sequence"
groups = [ "combat", "inventory" ]
block_while_busy = "ALL"
begin_sequence = [
  { event = "sequence", command = "disable all" },
  { event = "press", command = "select consumable"},
  { event = "press", command = "select consumable", delay = 3.0 },
  { event = "hold", command = "reload/toss", delay = 0.5 },
  { event = "release", command = "reload/toss" }
  ]
  
[[modifier]]
name = "CTG Strat"
description = "Self immolation resulting in death, at least 7/11 times"
type = "sequence"
groups = [ "combat", "inventory", "debuff" ]
begin_sequence = [
  { event = "sequence", command = "disable all" },
  { event = "hold", command = "vertical camera", value = 127 },
  { event = "release", command = "horizontal camera"},
  { event = "press", command = "select consumable" },
  { event = "press", command = "select consumable", delay = 3.0 },
  { event = "press", command = "reload/toss", delay = 0.5 },
  { event = "release", command = "vertical camera"}
  ]
  
[[modifier]]
name = "Pdub It"
description = "RIP bricks and bottles"
type = "sequence"
groups = [ "inventory" ]
begin_sequence = [
  { event = "sequence", command = "disable all" },
  { event = "press", command = "select consumable", delay = 2.5 },
  { event = "press", command = "reload/toss", delay= 0.2 }
]

[[modifier]]
name = "Chuck Smoke Bomb"
description = "It was taking up space anyway. Does nothing when playing Abby"
type = "sequence"
groups = [ "inventory" ]
begin_sequence = [
  { event = "sequence", command = "disable all" },
  { event = "press", command = "select consumable", value = -1, repeat = 2 },
  { event = "delay", delay = 3.0 },
  { event = "press", command = "reload/toss", delay = 0.2 }
]

[[modifier]]
name = "Only Prone Diving"
description = "RIP elbows and knees. Any movement results in a prone dive."
type = "sequence"
groups = [ "movement" ]
block_while_busy = [ "dodge/sprint", "crouch/prone" ]
while = [ "movement" ]
trigger = [ "vertical movement", "horizontal movement" ]
repeat_sequence = [  
  { event = "press", command = "dodge/sprint", delay = 0.1 },
  { event = "press", command = "crouch/prone", delay = 0.8 },
  { event = "release", command = "crouch/prone"},
  { event = "release", command = "dodge/sprint"}
  ]
begin_sequence = [ { event = "release", command = "dodge/sprint" },
                  { event = "release", command = "crouch/prone" }]
finish_sequence = [{ event = "release", command = "dodge/sprint" },
                  { event = "release", command = "crouch/prone" }]

[[modifier]]
name = "Rubbernecking"
description = "Woah! What's behind you? Invokes a periodic, 180-degree quick turn."
type = "sequence"
groups = [ "movement" ]
block_while_busy = [ "jump", "aiming", "vertical movement", "horizontal movement" ]
start_delay = 6.0
cycle_delay = 0.1
repeat_sequence = [
   { event = "release", command = "jump" },
   { event = "release", command = "aiming" },
   { event = "release", command = "horizontal movement" },
   { event = "hold", command = "vertical movement", delay=0.1}, # default is JOYSTICK_MAX = 127, which we want
   { event = "hold", command = "jump", delay=0.1},
   { event = "release", command = "jump"}
   ]

# === Menu Modifiers ===
[[modifier]]
name = "Restart Checkpoint"
description = "Best served prior to the end of a long encounter."
groups = [ "debuff" ]
type = "menu"
menu_items = [{entry = "restart" }]
reset_on_finish = false

[[modifier]]
name = "No Reticle"
description = "Headshots just got trickier."
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "reticle", value = 0 }]

[[modifier]]
name = "No Inventory HUD"
description = "Want to know what weapons or throwables you're selecting? Think again."
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "weapon cross", value = 0 }]

[[modifier]]
name = "No Damage Indicators"
description = "Locating the source of damage will be harder."
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "damage indicators", value = 0 }]

[[modifier]]
name = "No Awareness Indicators"
description = "Stealth strats have no visual feedback"
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "awareness indicators", value = 0 }]

[[modifier]]
name = "No Hit Markers"
description = "No feedback on connected shots"
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "hit markers", value = 0 }]

[[modifier]]
name = "No Arc Throw Paths"
description = "The trajectory of your throwable will now be based on feel."
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "arc throw path", value = 0 }]

[[modifier]]
name = "No Health HUD"
description = "The health and weapon HUD is disabled."
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "health bar", value = 0 }]

[[modifier]]
name = "Show Pickups"
description = "Enables the HUD that shows notifications on ammo, crafting, and other pickups"
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "pickup notifications", value = 0 }]

[[modifier]]
name = "Large Subtitles"
description = "The ability to read subtitles even at 160p."
type = "menu"
groups = [ "UI" ]
menu_items = [{entry = "subtitle size", value = 2 }]

# Render Modes:
[[modifier]]
name = "Graphic"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "graphic" }]

[[modifier]]
name = "Headache"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "render" }]

[[modifier]]
name = "Afterlife"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "afterlife" }]

[[modifier]]
name = "8-Bit"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "eightbit" }]

[[modifier]]
name = "Water Color"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "watercolor" }]

[[modifier]]
name = "Dungeon"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "dungeon" }]

[[modifier]]
name = "Void"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "void" }]

[[modifier]]
name = "Pop Poster"
description = "Stream Destroyer. This kills the bitrate"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "pop poster" }]

[[modifier]]
name = "1960"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "1960" }]

[[modifier]]
name = "Cool"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "cool" }]

[[modifier]]
name = "Warm"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "warm" }]

[[modifier]]
name = "Vibrant"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "vibrant" }]

[[modifier]]
name = "Noir"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "noir" }]

[[modifier]]
name = "Blorange"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "blorange" }]

[[modifier]]
name = "Sepia"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "sepia" }]

[[modifier]]
name = "Vintage"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "vintage" }]

[[modifier]]
name = "Beasts"
description = "Render Mode"
type = "menu"
groups = [ "render mode" ]
menu_items = [{entry = "beasts" }]

[[modifier]]
name = "Terminated"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "terminated" }]

[[modifier]]
name = "Gridlocked"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "gridlocked" }]

[[modifier]]
name = "Blacklight"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "blacklight" }]

[[modifier]]
name = "Desert Fog"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "desert fog" }]

[[modifier]]
name = "Blood"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "blood" }]

[[modifier]]
name = "Inferno"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "inferno" }]

[[modifier]]
name = "Fire"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "fire" }]

[[modifier]]
name = "Trinity"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "trinity" }]

[[modifier]]
name = "Pusher"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "pusher" }]

[[modifier]]
name = "Demons"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "demons" }]

[[modifier]]
name = "Drug Zone"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "drugzone" }]

[[modifier]]
name = "Moonlight"
description = "Render Mode"
type = "menu"
groups = ["render mode" ]
menu_items = [{entry = "moonlight" }]

[[modifier]]
name = "Mirror World"
description = "Wait, where do we go?"
type = "menu"
groups = [ "view" ]
menu_items = [{entry = "mirror", value = 1 }]

[[modifier]]
name = "Mirror On Death"
description = "Mirror World on Death. Can result in permanent Mirror World."
type = "menu"
groups = [ "view" ]
menu_items = [{entry = "mirror on death", value = 1 }]

[[modifier]]
name = "Close POV"
description = "Objects in mirror are closer than they appear."
type = "menu"
groups = [ "view" ]
menu_items = [{entry = "camera distance", value = 0},
            {entry = "field of view", value = 0}]

[[modifier]]
name = "Slow Motion"
description = "The speed-run killer"
type = "menu"
menu_items = [{entry = "slow motion", value = 1 }]

[[modifier]]
name = "Bullet Speed"
description = "Slow motion when aiming"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "bullet speed", value = 1 }]

[[modifier]]
name = "Infinite Ammo"
description = "The strimmer responds with <3"
type = "menu"
groups = ["buff"]
menu_items = [{entry = "infinite ammo", value = 1 }]
  
[[modifier]]
name = "Infinite Crafting"
description = "Molotovs for everyone!"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "infinite crafting", value = 1 }]

[[modifier]]
name = "Infinite Melee Durability"
description = "Finally, realistic durability."
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "infinite melee durability", value = 1 }]

[[modifier]]
name = "Infinite Listen Range"
description = "There used to be a limit?"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "infinite listen range",  value = 1 }]

[[modifier]]
name = "One Shot"
description = "Golden guns activated: one-shot kills."
type = "menu"
groups = ["buff"]
menu_items = [{entry = "one shot", value = 1 }]
  
[[modifier]]
name = "Touch Of Death"
description = "Golden fists activated: one-hit enemy deaths"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "touch of death", value = 1 }]

[[modifier]]
name = "8-Bit Audio"
description = "Audio mode. Incompatible with 4-bit"
type = "menu"
groups = [ "sound" ]
menu_items = [{entry = "8-bit audio", value = 1 }]
  
[[modifier]]
name = "4-Bit Audio"
description = "Audio mode. Incompatible with 8-bit"
type = "menu"
groups = [ "sound"] 
menu_items = [{entry = "4-bit audio", value = 1 }]

[[modifier]]
name = "Helium Audio"
description = "Audio mode.  Incompatible with Xenon"
type = "menu"
groups = [ "sound" ]
menu_items = [{entry = "helium audio", value = 1 }]

[[modifier]]
name = "Xenon Audio"
description = "Audio mode.  Incompatible with Helium"
type = "menu"
groups = [ "sound" ]
menu_items = [{entry = "xenon audio", value = 1 }]

[[modifier]]
name = "Infinite Hugging"
description = "Grabbed enemies do not escape"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "hostages don't escape", value = 1 }]

[[modifier]]
name = "No Plus Signs"
description = "Speedrunners need this.  Allies do not get grabbed."
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "allies don't get grabbed", value = 1 }]

[[modifier]]
name = "Enemies Do Not Flank"
description = "Very effective on infected Kappa"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "enemies don't flank", value = 1 }]

[[modifier]]
name = "Reduced Enemy Perception"
description = "Finally, clickers are truly blind."
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "reduced enemy perception", value = 1 }]

[[modifier]]
name = "Potato Enemies"
description = "Enemies shoot less accurately. Does not work on melee."
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "reduced enemy accuracy", value = 1 }]

[[modifier]]
name = "Enhanced Dodge"
description = "I wish I knew what this does (built-in option)"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "enhanced dodge", value = 1 }]

[[modifier]]
name = "Invisible While Prone"
description = "Proning is now even more OP"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "invisible while prone", value = 1 }]

[[modifier]]
name = "Camera Assist"
description = "Automatically reorients the camera in the direction of movement."
type = "menu"
groups = [ "navigation" ]
menu_items = [{entry = "camera assist", value = 1 }]

[[modifier]]
name = "Aimbot"
description = "Aimbot... but like a detuned aimbot.  Turns on lock-on aim"
groups = [ "buff" ]
type = "menu"
menu_items = [{entry = "lock-on aim", value = 1 }]

[[modifier]]
name = "Aimbot Throwables"
description = "Aimbot for throwables. Turns on lock-on throwables"
type = "menu"
groups = ["buff"]
menu_items = [{entry = "arc throw lock-on", value = 1 }]

[[modifier]]
name = "Kleptomania"
description = "Picking up items at inconvenient times. Turns on auto pick-up"
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "auto pick-up", value = 1 }]

[[modifier]]
name = "Large HUD"
description = "HUD like in a game from the 1990s"
type = "menu"
groups = ["UI"]
menu_items = [{entry = "HUD scale", value = 2 }]

[[modifier]]
name = "High Contrast Display"
description = "Render mode, but overrides any other render mode"
type = "menu"
groups = ["render"]
menu_items = [{entry = "high contrast", value = 1 }]

[[modifier]]
name = "Musical Traversal"
description = "Add some music to climbable objects with Traversal Audio Cues"
type = "menu"
groups = ["sound", "movement"]
menu_items = [{entry = "traversal cues", value = 1  }]

[[modifier]]
name = "Musical Combat"
description = "Add some music to combat prompts with Combat Audio Cues"
type = "menu"
groups = ["sound"]
menu_items = [{entry = "combat cues", value = 1 }]

[[modifier]]
name = "Traversal Assistance"
description = "Climb when you really do not want to"
type = "menu"
groups = [ "movement" ]
menu_items = [{entry = "traversal assistance", value = 1 }]

[[modifier]]
name = "Enhanced Listen Mode"
description = "Press some buttons while in listen mode to find loot"
type = "menu"
menu_items = [{entry = "enhanced listen", value = 1 }]

[[modifier]]
name = "Infinite Breath"
description = "Yup, very useful and is the most OP perk..."
type = "menu"
groups = [ "buff" ]
menu_items = [{entry = "infinite breath", value = 1 }]

[[modifier]]
name = "Mute Sound Effects"
description = "Gunshots hurt our ears :("
type = "menu"
groups = [ "sound" ]
menu_items = [{entry = "effects", value = 0 }]

[[modifier]]
name = "Mute Music"
description = "The music is too intense, let's turn it off!"
type = "menu"
groups = [ "sound" ]
menu_items = [{entry = "music", value = 0 }]

[[modifier]]
name = "Mute Dialogue"
description = "Sorry Shannon :("
type = "menu"
groups = [ "sound" ]
menu_items = [{entry = "dialogue", value = 0 }]

[[modifier]]
name = "Mono Audio"
description = "No more stereo. Where did that gunshot come from?"
type = "menu"
groups = [ "sound" ]
menu_items = [{entry = "mono", value = 1 }]

# This is a child-only mod: part of the Navigation Assistance parent mod
[[modifier]]
name = "Enable Navigation Assistance"
description = "Turn on navigation assistance"
type = "menu"
menu_items = [{entry = "navigation assistance", value=1 }]
unlisted = true

# === Delay Modifiers ===
#
[[modifier]]
name = "Input Delay"
description = "Introduces a 0.2 second delay to the controller"
type = "delay"
groups = [ "debuff", "movement", "view", "inventory", "combat" ]
applies_to = "ALL"
delay = 0.2

[[modifier]]
name = "Melee Delay"
description = "Introduces a 0.5 second delay to melee presses"
type = "delay"
groups = [ "debuff", "combat" ]
applies_to = [ "melee" ]
delay = 0.5

[[modifier]]
name = "Jump Delay"
description = "Introduces a 2.0 second delay to jump presses"
type = "delay"
groups = [ "debuff", "movement" ]
applies_to = [ "jump" ]  
delay = 2.0

[[modifier]]
name = "Dodge Delay"
description = "Introduces a 0.5 second delay to dodge/sprint"
type = "delay"
groups = [ "debuff", "movement" ]
applies_to = [ "dodge/sprint" ]  
delay = 0.5

[[modifier]]
name = "Aim Delay"
description = "Introduces a 1 second delay to aiming"
type = "delay"
groups = [ "debuff", "combat" ]
applies_to = [ "aiming" ]  
delay = 1.0

[[modifier]]
name = "Shooting Delay"
description = "Introduces a 0.5 second delay to shooting and throwing"
type = "delay"
groups = [ "debuff", "combat" ]
applies_to = [ "shoot" ]  
delay = 0.5

[[modifier]]
name = "Select Delay"
description = "Introduces a 5 second delay to selecting weapons or consumables"
type = "delay"
groups = [ "debuff", "inventory" ]
applies_to = [ "select weapon", "select consumable" ]
delay = 5.0

[[modifier]]
name = "Joystick Delay"
description = "Introduces a 0.2 second delay to movement and aiming."
type = "delay"
groups = [ "debuff", "movement", "view" ]
applies_to = [ "horizontal movement", "vertical movement", "horizontal camera", "vertical camera"  ]
delay = 0.2

# === Parent Modifiers ===
#
[[modifier]]
name = "Mystery"
description = "Applies a random modifier"
type = "parent"
random = true
value = 1

[[modifier]]
name = "Chaos"
description = "Applies 5 random modifiers"
type = "parent"
random = true
value = 5

[[modifier]]
name = "Navigation Assistance"
description = "Keeps pointing camera in direction of story progression"
type = "parent"
children = [ "Enable Navigation Assistance", "Periodic Navigation Assistance"]

[[modifier]]
name = "Drunk"
description = "Random joystick motion. Also don't push things too far, or you may stumble (go prone)"
type = "parent"
groups = [ "movement", "view" ]
children = ["Random Movement", "Stumblebum"]
